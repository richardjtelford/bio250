---
title: "Chronologies Practical: Radiocarbon dating & proxy correlation"
author: "Richard J. Telford"
date: '`r format(Sys.Date(), "%d %B %Y")`'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE)

```

# Part One: Running Bacon test examples.

1) Make a new project (File > New Project). This helps keep track of files and working directories.
2) Load the `rbacon` package with `library(rbacon)`. Also load the `tidyverse` package for `ggplot` etc.
3) Run the command `Bacon()` to make an age-depth model for the ^14^C dates on the default core MSB2K. Answer "y" to the questions.
5) This will take a a few minutes (depending on how fast your computer is). When it is finished, run `agedepth()` to create a plot. 

The first plot indicates how well the Monte Carlo procedure has converged – you want this to resemble a hairy caterpillar (white noise). 

The second and third plots show the prior (green) and posterior (grey) for the sedimentation rate and memory respectively.

The main panel shows the calibrated ^14^C dates (blue) and the age depth model, where darker greys indicate more likely ages. A red line picks out the most likely age for each depth. 

6) Run `proxy.ghost()` to see the proxies with chronological uncertainty.

#Part two: CLAM

Fitting an age-depth model for the Trettetjørn data.

1) Download the dates_trettetjorn.csv from mitt uib.
Make sure the file format exactly matches the file Example.csv in the clam_runs directory that Bacon made in the previous section. 

2)  Bacon and clam are very particular and idiosyncratic about how they expects to find data. Read the manuals for more details. Put the file dates_trettetjorn.csv into the directory “chronology_practical/dates_trettetjorn” inside the directory where your project file is.

3)  Import the dates into R with `read_csv()`.

4)    Calibrate dates individually with clam::calibrate. To calibrate the first date, you will need code like



```{r}
clam::calibrate(cage = trettetjorn$age[1], error = trettetjorn$error[1])
```

5)    Fit a model with clam

```{r}
clam("Lygra", coredir = "chronology_practical/")
```



Try different types of model

#Part 3 Bacon

Format as the file MSB2K.csv in the Bacon_runs directory that Bacon made in the first section. Save the file as trettetjorn_Bacon.csv in a directory called trettetjorn_Bacon.

Fit a model with Bacon. Answer “y” at the prompt.

```{r}
Bacon("trettetjorn_Bacon", coredir = "chronology_practical/")

```


Examine the age-depth plot and check for convergence.
Bacon will put some output files into the data directory.

